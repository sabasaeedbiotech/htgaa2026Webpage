{{/* mostly taken from the theme's layouts/partials/topbar/button/edit.html; differences marked with CHANGED */}}
{{- $onwidths := cond (isset . "onwidths") .onwidths "area-more" }}
{{- $onwidthm := cond (isset . "onwidthm") .onwidthm "show" }}
{{- $onwidthl := cond (isset . "onwidthl") .onwidthl "show" }}
{{- with .page }}
        {{- $show := .File }}
        {{- if $show }}
                {{- $show = not (partial "_relearn/pageIsSpecial.gotmpl" .) }}
        {{- end }}
        {{- if $show }}
                {{- $filePath := printf "%s%s" (strings.TrimLeft "/" (replace .File.Dir "\\" "/")) .File.LogicalName }}
                {{- $href := "" }}
                {{/* CHANGED next 2 lines */}}
                {{- if .Site.Params.editWysiwygURL }}
                        {{- $href = .Site.Params.editWysiwygURL }}
                        {{- if not (strings.Contains $href "${FilePath}") }}
                                {{- $href = printf "%s%s" $href "${FilePath}" }}
                        {{- end }}
                {{- end }}
                {{/* CHANGED next 2 lines (this handles per-page vars set in front matter) */}}
                {{- if isset .Params "editwysiwygurl" }}
                        {{- $href = .Params.editWysiwygURL }}
                {{- end }}
                {{- $href = strings.Replace $href "${FilePath}" $filePath }}
                {{- if $href }}
                        {{/* CHANGED class & icon & hint */}}
                        {{- partial "topbar/func/button.html" (dict
                                "page" .
                                "class" "topbar-button-edit-wysiwyg"
                                "href" $href
                                "icon" "file-word"
                                "onwidths" $onwidths
                                "onwidthm" $onwidthm
                                "onwidthl" $onwidthl
                                "hint" (printf "%s WYSIWYG (CTRL+ALT+w)" (T "Edit-this-page"))
                        )}}
                {{- end }}
        {{- end }}
{{- end }}